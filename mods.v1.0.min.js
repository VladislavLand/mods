/*!
 * mods.js v1.0 | MIT License | (c) 2025 Vladislav Land
 * https://vladislav-land.ru/mods/license
 */
function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"ru",includedLanguages:"ru,en,fr,zh-CN,kk",layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:!1},"google_translate_element")}const flags={ru:"https://static.tildacdn.com/tild3930-3039-4463-b536-666463383031/photo.png",en:"https://static.tildacdn.com/tild3338-6364-4837-b438-633839633932/en.png",fr:"https://static.tildacdn.com/tild3564-3930-4238-b366-366666633031/fr.png","zh-CN":"https://static.tildacdn.com/tild6361-6130-4238-b137-393932333332/cn.png",kk:"https://static.tildacdn.com/tild3132-3233-4735-b135-346534663735/kz.png"};function updateLangButton(e){const t=document.getElementById("langBtn"),n=t.querySelector("span"),a=t.querySelector("img");let o=e.toUpperCase();"zh-CN"===e&&(o="CN"),n.textContent=o,a.src=flags[e]||flags.ru,a.alt=e.toUpperCase()}function getSelectedLanguage(){const e=document.cookie.match(/googtrans=\/[^\/]+\/([^;]+)/);return e?e[1]:"ru"}function autoCloseWidget(){const e=document.getElementById("google_translate_element");"block"===e.style.display&&(e.style.display="none")}function watchWidgetLanguageChange(){const e=document.getElementById("google_translate_element");if(!e)return;new MutationObserver(()=>{const e=getSelectedLanguage();updateLangButton(e),autoCloseWidget()}).observe(e,{childList:!0,subtree:!0})}function preventScrollOnOpen(){const e=document.getElementById("google_translate_element");e&&e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=window.scrollX,n=window.scrollY;setTimeout(()=>{window.scrollTo(t,n)},1)})}function toggleTranslateWidget(){const e=document.getElementById("google_translate_element");e.style.display="none"===e.style.display||""===e.style.display?"block":"none"}window.addEventListener("load",()=>{updateLangButton(getSelectedLanguage()),watchWidgetLanguageChange(),document.getElementById("langBtn").addEventListener("click",e=>{e.stopPropagation(),toggleTranslateWidget()}),document.addEventListener("click",e=>{const t=document.getElementById("google_translate_element"),n=document.getElementById("langBtn");"block"===t.style.display&&!t.contains(e.target)&&!n.contains(e.target)&&(t.style.display="none")}),preventScrollOnOpen()});
